<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Interteks Randiman</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="topbar">
        <div class="brand">
          <div class="logo">IR</div>
          <div>
            <div class="title">Interteks Randiman</div>
            <div class="subtitle">Tezgah Durum ve Randiman</div>
          </div>
        </div>
        <div class="meta">
          <div id="last-updated">Son guncelleme: -</div>
          <button id="refresh-btn">Yenile</button>
          <button id="toggle-simple-ui">Basit Gorunum: Acik</button>
          <div class="meta-actions">
            <button id="open-loom-panel" class="icon-btn" title="Tezgah Bilgi Girisi">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M3 6h18v2H3V6zm2 4h14v2H5v-2zm-2 4h18v2H3v-2zm2 4h14v2H5v-2zM7 4h2v16H7V4zm8 0h2v16h-2V4z"></path>
              </svg>
            </button>
            <button id="open-settings-panel" class="icon-btn" title="Ayarlar">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M19.4 13a7.8 7.8 0 0 0 .1-1l2-1.5-2-3.4-2.4 1a8.6 8.6 0 0 0-1.7-1l-.4-2.6h-4l-.4 2.6a8.6 8.6 0 0 0-1.7 1l-2.4-1-2 3.4 2 1.5a7.8 7.8 0 0 0 .1 1l-2 1.5 2 3.4 2.4-1a8.6 8.6 0 0 0 1.7 1l.4 2.6h4l.4-2.6a8.6 8.6 0 0 0 1.7-1l2.4 1 2-3.4-2-1.5zM12 15.2A3.2 3.2 0 1 1 12 8.8a3.2 3.2 0 0 1 0 6.4z"></path>
              </svg>
            </button>
          </div>
          <div class="sound-visual" aria-hidden="true">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
    </header>

    <main class="container">
      <section class="summary">
        <div class="summary-card">
          <div class="label">Toplam Tezgah</div>
          <div class="value" id="total-count">0</div>
        </div>
        <div class="summary-card">
          <div class="label">Çalışıyor</div>
          <div class="value" id="active-count">0</div>
        </div>
        <div class="summary-card">
          <div class="label">Ortalama Randiman</div>
          <div class="value" id="avg-efficiency">0%</div>
        </div>
      </section>

      <section class="distribution advanced-block">
        <div class="section-title">Randiman Dagilimi</div>
        <div class="dist-list">
          <div class="dist-row">
            <span>0-40%</span>
            <div class="dist-bar"><div class="dist-fill low" id="dist-low"></div></div>
            <span id="dist-low-count">0</span>
          </div>
          <div class="dist-row">
            <span>40-60%</span>
            <div class="dist-bar"><div class="dist-fill mid" id="dist-mid"></div></div>
            <span id="dist-mid-count">0</span>
          </div>
          <div class="dist-row">
            <span>60-80%</span>
            <div class="dist-bar"><div class="dist-fill high" id="dist-high"></div></div>
            <span id="dist-high-count">0</span>
          </div>
          <div class="dist-row">
            <span>80-100%</span>
            <div class="dist-bar"><div class="dist-fill top" id="dist-top"></div></div>
            <span id="dist-top-count">0</span>
          </div>
        </div>
      </section>

      <section class="chart-section advanced-block">
        <div class="section-title">Tezgah Randiman Grafigi (T-001..T-100)</div>
        <div class="chart-wrap">
          <div id="tezgah-chart" class="tezgah-chart"></div>
        </div>
      </section>

      <section class="advanced-block">
        <div class="section-title">Durus Nedenleri (Bu Ay)</div>
        <div id="reasons" class="reasons">
          <div class="reason" data-key="sari">
          <div class="reason-label">Sarı - Atkı Duruşu</div>
            <div class="bar"><div class="fill sari"></div></div>
            <div class="reason-value" id="reason-sari">00:00:00</div>
            <div class="reason-count" id="reason-sari-count">0 duruş</div>
          </div>
          <div class="reason" data-key="kirmizi">
          <div class="reason-label">Kırmızı - Çözgü Duruşu</div>
            <div class="bar"><div class="fill kirmizi"></div></div>
            <div class="reason-value" id="reason-kirmizi">00:00:00</div>
            <div class="reason-count" id="reason-kirmizi-count">0 duruş</div>
          </div>
          <div class="reason" data-key="yesil">
          <div class="reason-label">Yeşil - Elle Durdurma</div>
            <div class="bar"><div class="fill yesil"></div></div>
            <div class="reason-value" id="reason-yesil">00:00:00</div>
            <div class="reason-count" id="reason-yesil-count">0 duruş</div>
          </div>
          <div class="reason" data-key="beyaz">
          <div class="reason-label">Beyaz - Genel Arıza / Usta</div>
            <div class="bar"><div class="fill beyaz"></div></div>
            <div class="reason-value" id="reason-beyaz">00:00:00</div>
            <div class="reason-count" id="reason-beyaz-count">0 duruş</div>
          </div>
        </div>
        <div class="reason-total">
          Iplik Sonu Durus: <span id="reason-iplik-count">0</span>
        </div>
      </section>

      <section class="advanced-block">
        <div class="section-title">Vardiyalar (Bu Ay)</div>
        <div class="tabs">
          <button class="tab-btn is-active" data-shift="07-15">Vardiya 1</button>
          <button class="tab-btn" data-shift="15-23">Vardiya 2</button>
          <button class="tab-btn" data-shift="23-07">Vardiya 3</button>
          <div class="tab-actions">
            <button id="download-shift-1">Vardiya 1 PDF</button>
            <button id="download-shift-2">Vardiya 2 PDF</button>
            <button id="download-shift-3">Vardiya 3 PDF</button>
          </div>
        </div>
        <div id="shifts" class="cards"></div>
      </section>

      <section>
        <div class="section-title">Aylik Rapor (Bu Ay)</div>
        <div class="report-actions">
          <button id="download-pdf">PDF Indir</button>
        </div>
        <div id="monthly" class="cards"></div>
      </section>

      <section>
        <div class="section-title">Tezgahlar canlı olarak</div>
        <div id="cards" class="cards"></div>
        <div id="empty" class="empty hidden">Henuz veri yok.</div>
      </section>
    </main>

    <div id="panel-overlay" class="panel-overlay hidden"></div>

    <aside id="loom-panel" class="side-panel hidden" aria-hidden="true">
      <div class="side-panel-header">
        <div class="section-title">Tezgah Bilgisi Girisi</div>
        <button class="side-panel-close" data-close-panel>x</button>
      </div>
      <form id="meta-form" class="meta-form">
        <input id="tezgah-id" placeholder="Tezgah ID (or. T-001)" required />
        <input id="desen" placeholder="Desen" />
        <input id="atki" placeholder="Atki sikligi" />
        <input id="devir" placeholder="Devir (rpm)" />
        <input id="siparis-metre" placeholder="Siparis Metre (m)" />
        <input id="teslim-metre" placeholder="Teslim Metre (m)" />
        <button type="submit">Kaydet</button>
      </form>
      <div id="meta-status" class="form-status"></div>
    </aside>

    <aside id="settings-panel" class="side-panel hidden" aria-hidden="true">
      <div class="side-panel-header">
        <div class="section-title">Ayarlar</div>
        <button class="side-panel-close" data-close-panel>x</button>
      </div>
      <div class="settings-subtitle">Hizli Ayarlar</div>
      <div class="settings-grid">
        <label class="settings-item">
          <span>Kart Sekli</span>
          <select id="setting-card-shape">
            <option value="rounded">Mevcut (Yuvarlak)</option>
            <option value="square">Kare</option>
          </select>
        </label>
        <label class="settings-item">
          <span>Gorunum Yogunlugu</span>
          <select id="setting-density">
            <option value="comfortable">Rahat</option>
            <option value="compact">Sik</option>
          </select>
        </label>
        <label class="settings-item">
          <span>Otomatik Yenileme</span>
          <select id="setting-refresh">
            <option value="5">5 sn</option>
            <option value="10">10 sn</option>
            <option value="20">20 sn</option>
            <option value="30">30 sn</option>
          </select>
        </label>
        <label class="settings-item settings-item-inline">
          <input id="setting-show-chart" type="checkbox" checked />
          <span>Tezgah Grafigini Goster</span>
        </label>
        <label class="settings-item settings-item-inline">
          <input id="setting-active-only" type="checkbox" />
          <span>Sadece Calisan Tezgahlar</span>
        </label>
      </div>

      <details class="settings-advanced">
        <summary>Gelismis Ayarlar</summary>
        <div class="settings-grid">
        <label class="settings-item">
          <span>Kart Siralama</span>
          <select id="setting-sort">
            <option value="tezgah_asc">Tezgah No (Artan)</option>
            <option value="tezgah_desc">Tezgah No (Azalan)</option>
            <option value="randiman_desc">Randiman (Yuksek -> Dusuk)</option>
            <option value="randiman_asc">Randiman (Dusuk -> Yuksek)</option>
          </select>
        </label>
        <label class="settings-item">
          <span>Kart Sutun Sayisi</span>
          <select id="setting-columns">
            <option value="auto">Otomatik</option>
            <option value="1">1 Sutun</option>
            <option value="2">2 Sutun</option>
            <option value="3">3 Sutun</option>
          </select>
        </label>
        <label class="settings-item settings-item-inline">
          <input id="setting-large-text" type="checkbox" />
          <span>Buyuk Yazi Modu</span>
        </label>
        <label class="settings-item settings-item-inline">
          <input id="setting-details-open" type="checkbox" />
          <span>Detaylari Acik Tut</span>
        </label>
        <label class="settings-item">
          <span>Vardiya Rapor Tipi</span>
          <select id="setting-shift-period">
            <option value="monthly">Aylik</option>
            <option value="daily">Gunluk</option>
          </select>
        </label>
        <label class="settings-item">
          <span>Vardiya Tarihi</span>
          <input id="setting-shift-date" type="date" />
        </label>
        </div>
      </details>
      <div class="settings-note">Not: Hizli ayarlar gunluk kullanim icin yeterlidir.</div>
    </aside>

    <script src="app.js"></script>
  </body>
</html>
